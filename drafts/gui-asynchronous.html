<!DOCTYPE html>
<html lang="en">
    <head>
          <title>NickNagel.com - Graphical User Interfaces with Asynchronous Code in Python</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script>
            MathJax = {
                tex: {
                    inlineMath: [['$', '$'], ['\\(', '\\)']]
                }
            };
        </script>
        <script 
            id="MathJax-script" 
            async 
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
        ></script>
        <link 
            rel="stylesheet" 
            type="text/css" 
            href="/theme/css/styles.css" />
        <link 
            rel="stylesheet" 
            href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" />




    <meta name="tags" content="graphical user interface" />
    <meta name="tags" content="python" />
    <meta name="tags" content="tkinter" />
    <meta name="tags" content="development" />
    <meta name="tags" content="rapid prototype" />
    <meta name="tags" content="threading" />
    <meta name="tags" content="computer science" />
    <meta name="tags" content="asynchronous" />
    <meta name="tags" content="code" />
    <meta name="tags" content="event loops" />

    </head>

    <body>
        <div class='banner'>
Welcome to NickNagel.com
        </div>
        <div class="container">
            <navbar class="navigation">
                <div class='image_item' id="pallas-athena-container">
                    <img id="pallas-athena-image"
                        src="/images/athena.svg" 
                        alt="Pallas Athena"
                    >
                </div>
                <ul>
                    <li>
                        <a href="/pages/about-nick.html">About Nick</a>
                    </li>
                    <li>
                        <a href="/blog/index.html">Blog</a>
                    </li>
                    <li>
                        <a href="/pages/nn-cv.html">CV</a>
                    </li>
                </ul>
            </navbar>
            <main class="content">
  <article>
    <header>
      <h2>
        <a href="/drafts/gui-asynchronous.html" rel="bookmark"
           title="Permalink to Graphical User Interfaces with Asynchronous Code in Python">Graphical User Interfaces with Asynchronous Code in Python</a></h2>
      
    </header>
    <h1>Introduction</h1>
<p>As a machine learning scientist and engineer I often have a need for rapid prototyping. And often over the course of hammaring out a concept proof the need for a graphical user interface arises. Now, I've had extensive experience in UI development in many languages including java, HTML5 + javascript in browsers, and electron application development. But though similar in many ways to other systems UI development in python for rapid prototyping poses some unique issues. </p>
<h1>The Problem</h1>
<p>The problem is using tkinter with asynciio (and, asynchronous routines in general).</p>
<p>TODO ELABORATE</p>
<h1>Python Architecture</h1>
<h2>GUIs</h2>
<h2>Event Loop</h2>
<p><img alt='INSERT EVENT LOOP DIAGRAM'
     src='' /></p>
<h2>AsyncIO</h2>
<h1>Solutions for Rapid Prototyping</h1>
<h2>Simple Solution</h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tk</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">aiortc</span>

<span class="k">async</span><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">do_async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">:</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;START ASYNC TASK&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;END ASYNC TASK&quot;</span><span class="w"> </span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">do_async_task</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;LAUNCH TASK...&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">async_loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="w"> </span><span class="n">task</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;&#39;Tis but a scratch!&quot;</span><span class="w"> </span><span class="p">)</span>

<span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;Test Harness&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;400x300&quot;</span><span class="w"> </span><span class="p">)</span>

<span class="n">button_tk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
<span class="w">    </span><span class="n">root</span><span class="p">,</span>
<span class="w">    </span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Click Me&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">command</span><span class="o">=</span><span class="n">handle_click</span>
<span class="p">)</span>
<span class="n">button_tk</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="w"> </span><span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="p">)</span>

<span class="n">button_async</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
<span class="w">    </span><span class="n">root</span><span class="p">,</span>
<span class="w">    </span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Do Async&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">do_async_task</span><span class="p">(</span><span class="w"> </span><span class="n">do_async</span><span class="w"> </span><span class="p">)</span><span class="w">  </span>
<span class="p">)</span>
<span class="n">button_async</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="w"> </span><span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="p">)</span>

<span class="c1">#  asyncio.run( do_async_task )</span>
<span class="n">async_loop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre></div>

<h2>Threaded Solution</h2>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tk</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">aiortc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">threading</span><span class="w"> </span><span class="kn">import</span><span class="w"> </span><span class="n">Thread</span>

<span class="k">async</span><span class="w"> </span><span class="k">def</span><span class="w"> </span><span class="nf">do_async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">:</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;START ASYNC TASK&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;END ASYNC TASK&quot;</span><span class="w"> </span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">do_async_task</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;LAUNCH TASK IN NEW THREAD...&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">task_thread</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="w"> </span>
<span class="w">        </span><span class="n">target</span><span class="o">=</span><span class="k">lambda</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="n">async_loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="w"> </span><span class="n">task</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="n">task_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">handle_click</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;&#39;Tis but a scratch!&quot;</span><span class="w"> </span><span class="p">)</span>

<span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;Test Harness&quot;</span><span class="w"> </span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="w"> </span><span class="s2">&quot;400x300&quot;</span><span class="w"> </span><span class="p">)</span>

<span class="n">button_tk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
<span class="w">    </span><span class="n">root</span><span class="p">,</span>
<span class="w">    </span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Click Me&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">command</span><span class="o">=</span><span class="n">handle_click</span>
<span class="p">)</span>
<span class="n">button_tk</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="w"> </span><span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="p">)</span>

<span class="n">button_async</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
<span class="w">    </span><span class="n">root</span><span class="p">,</span>
<span class="w">    </span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Do Async&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">do_async_task</span><span class="p">(</span><span class="w"> </span><span class="n">do_async</span><span class="w"> </span><span class="p">)</span><span class="w">  </span>
<span class="p">)</span>
<span class="n">button_async</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="w"> </span><span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="w"> </span><span class="p">)</span>

<span class="c1">#  asyncio.run( do_async_task )</span>
<span class="n">async_loop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">asyncio</span><span class="o">.</span><span class="n">new_event_loop</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</code></pre></div>

<h1>Summary and Discussion</h1>
<h1>Resources</h1>
<p>PYTHON THREADS (It's just like Java. )
  https://docs.python.org/3/library/threading.html#thread-objects</p>
<p>ASYNC IO EVENT LOOP DOCS
  https://docs.python.org/3/library/asyncio-eventloop.html
  https://docs.python.org/3/library/asyncio-runner.html</p>
    <footer>
      <p>Published: <time datetime="2024-10-23T00:00:00-04:00">
        Wed 23 October 2024
      </time></p>
        <address>
          By             <a href="/author/nick-nagel.html">Nick Nagel</a>
        </address>
        <p>
          Category: <a href="/category/blog.html">Blog</a>
        </p>
        <p>
          Tags:
            <a href="/tag/graphical-user-interface.html">graphical user interface</a>
            <a href="/tag/python.html">python</a>
            <a href="/tag/tkinter.html">tkinter</a>
            <a href="/tag/development.html">development</a>
            <a href="/tag/rapid-prototype.html">rapid prototype</a>
            <a href="/tag/threading.html">threading</a>
            <a href="/tag/computer-science.html">computer science</a>
            <a href="/tag/asynchronous.html">asynchronous</a>
            <a href="/tag/code.html">code</a>
            <a href="/tag/event-loops.html">event loops</a>
        </p>
    </footer>
  </article>
                <footer>
                    <hr />
                    <div class="footer_content">
Now built with <a rel="nofollow" href="https://getpelican.com/"><em>Pelican</em></a>,
which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                    </div>
                    <div class="copyright">
&copy; 1999-<span id="current-year"></span> Harold Nicholas Nagel. All rights reserved.  
                    </div>
                    <script>
document.getElementById("current-year").textContent = new Date().getFullYear();
                    </script>
                </footer>
            </main>
        </div>
    </body>
    
    
</html>